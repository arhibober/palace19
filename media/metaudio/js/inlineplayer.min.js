function InlinePlayer(){var b=this,c=this,f=soundManager;this.playableClass="inline-playable";this.excludeClass="inline-exclude";this.links=[];this.sounds=[];this.soundsByURL=[];this.indexByURL=[];this.lastSound=null;this.soundCount=0;var g=navigator.userAgent.match(/msie/i);this.config={playNext:!1,autoPlay:!1};this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};this.addEventHandler=function(a,b,e){typeof attachEvent=="undefined"?a.addEventListener(b,
e,!1):a.attachEvent("on"+b,e)};this.removeEventHandler=function(a,b,e){typeof attachEvent=="undefined"?a.removeEventListener(b,e,!1):a.detachEvent("on"+b,e)};this.classContains=function(a,b){return typeof a.className!="undefined"?a.className.match(RegExp("(\\s|^)"+b+"(\\s|$)")):!1};this.addClass=function(a,d){if(!a||!d||b.classContains(a,d))return!1;a.className=(a.className?a.className+" ":"")+d};this.removeClass=function(a,d){if(!a||!d||!b.classContains(a,d))return!1;a.className=a.className.replace(RegExp("( "+
d+")|("+d+")","g"),"")};this.getSoundByURL=function(a){return typeof b.soundsByURL[a]!="undefined"?b.soundsByURL[a]:null};this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!=b);return a.nodeName.toLowerCase()==b?a:null};this.events={play:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPlaying;c.addClass(this._data.oLink,this._data.className)},stop:function(){c.removeClass(this._data.oLink,
this._data.className);this._data.className=""},pause:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPaused;c.addClass(this._data.oLink,this._data.className)},resume:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className=c.css.sPlaying;c.addClass(this._data.oLink,this._data.className)},finish:function(){c.removeClass(this._data.oLink,this._data.className);this._data.className="";if(c.config.playNext){var a=c.indexByURL[this._data.oLink.href]+
1;a<c.links.length&&c.handleClick({target:c.links[a]})}}};this.stopEvent=function(a){if(typeof a!="undefined"&&typeof a.preventDefault!="undefined")a.preventDefault();else if(typeof event!="undefined"&&typeof event.returnValue!="undefined")event.returnValue=!1;return!1};this.getTheDamnLink=g?function(a){return a&&a.target?a.target:window.event.srcElement}:function(a){return a.target};this.handleClick=function(a){if(typeof a.button!="undefined"&&a.button>1)return!0;var d=b.getTheDamnLink(a);if(d.nodeName.toLowerCase()!=
"a"&&(d=b.isChildOfNode(d,"a"),!d))return!0;d.getAttribute("href");if(!d.href||!f.canPlayLink(d)&&!b.classContains(d,b.playableClass)||b.classContains(d,b.excludeClass))return!0;var e=d.href,c=b.getSoundByURL(e);c?c==b.lastSound?c.togglePause():(c.togglePause(),f._writeDebug("sound different than last sound: "+b.lastSound.sID),b.lastSound&&b.stopSound(b.lastSound)):(c=f.createSound({id:"inlineMP3Sound"+b.soundCount++,url:e,onplay:b.events.play,onstop:b.events.stop,onpause:b.events.pause,onresume:b.events.resume,
onfinish:b.events.finish}),c._data={oLink:d,className:b.css.sPlaying},b.soundsByURL[e]=c,b.sounds.push(c),b.lastSound&&b.stopSound(b.lastSound),c.play());b.lastSound=c;typeof a!="undefined"&&typeof a.preventDefault!="undefined"?a.preventDefault():event.returnValue=!1;return!1};this.stopSound=function(a){soundManager.stop(a.sID);soundManager.unload(a.sID)};this.init=function(){f._writeDebug("inlinePlayer.init()");for(var a=document.getElementsByTagName("a"),c=0,e=0,g=a.length;e<g;e++)if((f.canPlayLink(a[e])||
b.classContains(a[e],b.playableClass))&&!b.classContains(a[e],b.excludeClass))b.addClass(a[e],b.css.sDefault),b.links[c]=a[e],b.indexByURL[a[e].href]=c,c++;c>0&&(b.addEventHandler(document,"click",b.handleClick),b.config.autoPlay&&b.handleClick({target:b.links[0],preventDefault:function(){}}));f._writeDebug("inlinePlayer.init(): Found "+c+" relevant items.")};this.init()}soundManager.debugMode=!0;soundManager.useFlashBlock=!0;soundManager.url="media/metaudio/swf/";soundManager.flashVersion=9;
soundManager.useMovieStar=!0;if(document.all){var _removeSoundManager=function(){var b=document.all["sm2-container"];b&&b.removeNode(!0)};window.addEventListener?window.addEventListener("unload",_removeSoundManager,!1):window.attachEvent?window.attachEvent("onunload",_removeSoundManager):window.unload=_removeSoundManager};
